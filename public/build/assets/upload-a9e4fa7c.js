$(document).ready(function(){const s=$('meta[name="csrf-token"]').attr("content"),l=$('input[name="id"]').val();let o=[];$("#addImageButton").click(function(){$("#upload-btn").removeClass("d-none");var e='<div class="input-group mb-3">';e+='<input type="file" name="images[]" class="form-control">',e+='<div class="input-group-append">',e+='<input type="button" class="btn btn-danger remove-image" value="Remove">',e+="</div></div>",$("#imageContainer").append(e)}),$(document).on("click",".remove-image",function(){$(this).closest(".input-group").remove()}),$(document).on("click","#uploadImageButton",function(){$('input[name^="images"]').each(function(e,a){o.push(a.files[0])}),t()});function t(){if(o.length>0){var e=new FormData,a=o.shift();e.append("image",a),e.append("id",l),e.append("_token",s),$.ajax({url:"/admin/upload-image",type:"POST",data:e,contentType:!1,processData:!1,xhr:function(){var n=new XMLHttpRequest;return n.upload.addEventListener("progress",function(i){if(i.lengthComputable){var u=i.loaded/i.total*100;console.log("Upload Progress: "+u+"%")}},!1),n},success:function(n){n.success?console.log("Image uploaded successfully: "+n.image):console.log("Error uploading image."),t()},error:function(){console.log("Error uploading image."),t()}})}else alert("All images uploaded successfully"),$("#upload-btn").addClass("d-none"),$('input[name^="images"]').remove(),$(".remove-image").remove()}$(".delete-image").click(function(){var e=$(this).data("image");$("#image_id").val(e),confirm("Are you sure you want to delete this image?")&&$.ajax({url:"/admin/remove-image",method:"DELETE",data:{_token:s,id:e},success:function(a){a.success?($("#image-card-"+e).remove(),alert("Image deleted successfully")):alert("There was an error deleting the image")}})})});
